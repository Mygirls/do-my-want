<!DOCTYPE html>
<html lang="zh-CN">
<head>

<title>乐经纪</title>
	</head>

	<body>
	<input type="button" value="复制" onClick="ljj_copyText('Hello Android!')" />
	<input type="button" value="获取用户信息" onClick="ljj_getUserInfo()" />

	<script type="text/javascript">
    function ljj_copyText(text) {
        var a=ljj_copyText(text);
         alert(a)
    }

      function ljj_getUserInfo() {
        var s=ljj_getUserInfo();
        alert(s)
    }
    
    function setupWebViewJavascriptBridge(callback) {
        if (window.WebViewJavascriptBridge) { return callback(WebViewJavascriptBridge); }
        if (window.WVJBCallbacks) { return window.WVJBCallbacks.push(callback); }
        window.WVJBCallbacks = [callback];
        var WVJBIframe = document.createElement('iframe');
        WVJBIframe.style.display = 'none';
        WVJBIframe.src = 'https://__bridge_loaded__';
        document.documentElement.appendChild(WVJBIframe);
        setTimeout(function() { document.documentElement.removeChild(WVJBIframe) }, 0)
    }
    
    setupWebViewJavascriptBridge(function(bridge) {
                                 
                                 /* Initialize your app here */
                                 /* 登记在objc的处理程序，并调用JS handler
                                 [self.bridge registerHandler:@"ObjC Echo" handler:^(id data, WVJBResponseCallback responseCallback) {
                                    NSLog(@"ObjC Echo called with: %@", data);
                                    responseCallback(data);
                                  }];
                                 
                                 [self.bridge callHandler:@"JS Echo" data:nil responseCallback:^(id responseData) {
                                    NSLog(@"ObjC received response: %@", responseData);
                                  
                                  }];
                                 */
                                 
                                 bridge.registerHandler('JS Echo', function(data, responseCallback) {
                                                        console.log("JS Echo called with:", data)
                                                        responseCallback(data)
                                                        })
                                 bridge.callHandler('ObjC Echo', {'key':'value'}, function responseCallback(responseData) {
                                                    console.log("JS received response:", responseData)
                                                    })
                                 })

</script>


	</body>
</html>
